/*
 * adxl.cpp
 *
 *  Created on: Aug 26, 2025
 *      Author: ahmad
 */

#include "adxl.hpp"

#define ADXL_DEVID_REG       0x00
#define ADXL_DEV_ADDR        0x53
#define ADXL_REG_DATA_FORMAT 0x31
#define ADXL_REG_POWER_CTL   0x2D
#define ADXL_REG_DATA_START  0x32
#define ADXL_RANGE_4G     	 0x01
#define ADXL_MEASURE         0x08
#define ADXL_READ_MASK       0x80
#define ADXL_MULTI_BYTE_MASK 0x40
#define ADXL_RESET           0x00


ADXL::ADXL(SPI &spi, uint8_t device_addr) :
		spi(spi), device_addr(device_addr), x(0), y(0), z(0) {
	// Constructor to initialize the ADXL object
}

void ADXL::write_register(uint8_t reg, uint8_t value) {
	uint8_t data[2] = {reg | ADXL_MULTI_BYTE_MASK, value};
	spi.transmit(device_addr, data, 2);
}
